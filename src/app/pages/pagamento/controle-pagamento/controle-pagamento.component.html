<form [formGroup]="controlePagamentoForm" novalidate (ngSubmit)="onSubmit()">
    <mat-card class="controle-pagamento">
        <mat-card-header>
            <mat-card-title>Controle de Pagamento</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-label class="full-width">Responsável</mat-label>
                        <mat-select class="full-width" [(value)]="selectedResponsavel">
                            @for (responsavel of responsaveis; track responsavel) {
                            <mat-option [value]="responsavel">{{responsavel.nome_responsavel}}</mat-option>
                            }
                        </mat-select>
                        @if (controlePagamentoForm.controls['responsavel'].hasError('required')) {
                        <mat-error>O nome do evento deverá ser informado </mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-label class="full-width">Data</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="data">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        @if (controlePagamentoForm.controls['data'].hasError('required')) {
                        <mat-error>A data deverá ser informada </mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-label class="full-width">Forma de Pagamento</mat-label>
                        <mat-select class="full-width" [(value)]="selectedFormaPagamento">
                            @for (tipo of formaPagamento; track tipo) {
                            <mat-option [value]="tipo">{{tipo}}</mat-option>
                            }
                        </mat-select>
                        @if (controlePagamentoForm.controls['responsavel'].hasError('required')) {
                        <mat-error>O nome do evento deverá ser informado </mat-error>
                        }
                    </mat-form-field>
                </div>

            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-label class="full-width">Descrição</mat-label>
                        <input matInput formControlName="observacao">
                        @if (controlePagamentoForm.controls['observacao'].hasError('required')) {
                        <mat-error>A observação deverá ser informada </mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="button-container">
                <button mat-flat-button color="primary" class="button"
                    (click)="openUserDialog(); $event.preventDefault()">INSERIR PAGAMENTO</button>
            </div>
            <mat-list role="list">

                @for (lista of listaItensPago; track lista) {
                    <mat-list-item class="list-item">
                        <div class="row">
                            <div class="col">
                                {{ lista.desbravador.nome }}
                            </div>
                            <div class="col right-align">
                                {{ lista.valor.toFixed(2) }}
                            </div>
                            <div class="col right-align">
                                {{ lista.item }}
                            </div>
                        </div>
                    </mat-list-item>
                    <mat-divider></mat-divider>
                  }
              </mat-list>
        </mat-card-content>

        <mat-card-actions class="button-container">
                <button mat-flat-button color="primary" class="button" (click)="onSubmit()">INSERIR</button>
        </mat-card-actions>
    </mat-card>
</form>